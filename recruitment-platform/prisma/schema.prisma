generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id            String    @id @default(cuid())
  name          String?
  email         String    @unique
  emailVerified DateTime?
  image         String?
  password      String?
  role          String    @default("USER")
  isGatekeeper  Boolean   @default(false)
  companyId     String?
  tenantId      String?
  firstName     String?
  lastName      String?
  plan          String    @default("FREE")
  accounts      Account[]
  sessions      Session[]
  company       Company?  @relation(fields: [companyId], references: [id])
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
}

model Account {
  id                String  @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String?
  access_token      String?
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String?
  session_state     String?
  user              User    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
}

model Session {
  id           String   @id @default(cuid())
  sessionToken String   @unique
  userId       String
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model VerificationToken {
  identifier String
  token      String   @unique
  expires    DateTime

  @@unique([identifier, token])
}

model Company {
  id        String   @id @default(cuid())
  name      String
  tenantId  String?  @unique
  domain    String?  @unique
  plan      String   @default("FREE")
  users     User[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Candidate {
  id                String   @id @default(cuid())
  firstName         String
  lastName          String
  email             String   @unique
  phoneNumber       String?
  desiredRoles      String
  skills            String
  industries        String
  seniorityLevel    String?
  certifications    String
  location          String?
  profileDataJson   String?
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}

model JobPosting {
  id                    String    @id @default(cuid())
  externalReference     String?
  source                String?
  sourceUrl             String?
  jobTitle              String
  companyName           String
  companyDivision       String?
  organizationalUnit    String?
  roleCategory          String?
  roleProfile           String?
  seniorityLevel        String
  workLocation          String
  employmentType        String
  contractDuration      String?
  startDate             DateTime?
  endDate               DateTime?
  extensionPossible     Boolean   @default(false)
  description           String
  missionContext        String?
  responsibilities      String
  objectives            String
  education             String?
  experience            String?
  skills                String?
  languages             String
  industry              String?
  domain                String?
  travelRequired        String?
  salaryRange           String?
  applicationMethod     String?
  contactPerson         String?
  applicationDeadline   DateTime?
  postingDate           DateTime  @default(now())
  lastUpdated           DateTime  @updatedAt
  status                String    @default("ACTIVE")
  viewCount             Int       @default(0)
  applicationCount      Int       @default(0)
}
